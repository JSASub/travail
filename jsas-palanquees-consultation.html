<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>JSA - Consultation des Palanqu√©es</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      min-height: 100vh;
      padding: 20px;
    }
    
    .container {
      max-width: 1200px;
      margin: 0 auto;
    }
    
    .header {
      background: white;
      border-radius: 15px;
      padding: 20px;
      margin-bottom: 20px;
      box-shadow: 0 10px 30px rgba(0,0,0,0.2);
      text-align: center;
    }
    
    .header h1 {
      color: #6f42c1;
      margin-bottom: 10px;
    }
    
    .header .mode-badge {
      display: inline-block;
      background: #28a745;
      color: white;
      padding: 5px 15px;
      border-radius: 20px;
      font-size: 0.9em;
    }
    
    .search-section {
      background: white;
      border-radius: 15px;
      padding: 20px;
      margin-bottom: 20px;
      box-shadow: 0 5px 20px rgba(0,0,0,0.1);
    }
    
    .search-box {
      display: flex;
      gap: 10px;
      flex-wrap: wrap;
    }
    
    .search-box input, .search-box select {
      flex: 1;
      min-width: 200px;
      padding: 12px;
      border: 2px solid #e0e0e0;
      border-radius: 8px;
      font-size: 16px;
    }
    
    .search-box input:focus, .search-box select:focus {
      outline: none;
      border-color: #6f42c1;
    }
    
    .btn-search {
      background: #6f42c1;
      color: white;
      border: none;
      padding: 12px 30px;
      border-radius: 8px;
      cursor: pointer;
      font-size: 16px;
      transition: background 0.3s;
    }
    
    .btn-search:hover {
      background: #5a32a3;
    }
    
    .palanquees-list {
      display: grid;
      gap: 20px;
    }
    
    .palanquee-card {
      background: white;
      border-radius: 15px;
      padding: 20px;
      box-shadow: 0 5px 20px rgba(0,0,0,0.1);
      transition: transform 0.3s, box-shadow 0.3s;
    }
    
    .palanquee-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 10px 30px rgba(0,0,0,0.15);
    }
    
    .palanquee-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 15px;
      padding-bottom: 15px;
      border-bottom: 2px solid #f0f0f0;
    }
    
    .palanquee-title {
      font-size: 1.2em;
      color: #333;
      font-weight: bold;
    }
    
    .palanquee-date {
      background: #e3f2fd;
      color: #1976d2;
      padding: 5px 10px;
      border-radius: 5px;
      font-size: 0.9em;
    }
    
    .palanquee-info {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 10px;
      margin-bottom: 15px;
    }
    
    .info-item {
      display: flex;
      align-items: center;
      gap: 5px;
    }
    
    .info-label {
      font-weight: bold;
      color: #666;
    }
    
    .plongeurs-list {
      background: #f8f9fa;
      border-radius: 8px;
      padding: 15px;
      margin-top: 15px;
    }
    
    .plongeur-item {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 8px;
      margin: 5px 0;
      background: white;
      border-radius: 5px;
      border-left: 4px solid #6f42c1;
    }
    
    .plongeur-name {
      font-weight: 500;
      color: #333;
    }
    
    .plongeur-niveau {
      background: #6f42c1;
      color: white;
      padding: 2px 8px;
      border-radius: 3px;
      font-size: 0.85em;
    }
    
    .no-results {
      background: white;
      border-radius: 15px;
      padding: 40px;
      text-align: center;
      color: #999;
    }
    
    .stats-banner {
      background: white;
      border-radius: 15px;
      padding: 20px;
      margin-bottom: 20px;
      box-shadow: 0 5px 20px rgba(0,0,0,0.1);
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
      gap: 20px;
      text-align: center;
    }
    
    .stat-item {
      padding: 10px;
    }
    
    .stat-value {
      font-size: 2em;
      color: #6f42c1;
      font-weight: bold;
    }
    
    .stat-label {
      color: #666;
      font-size: 0.9em;
      margin-top: 5px;
    }
    
    .filter-chips {
      display: flex;
      gap: 10px;
      flex-wrap: wrap;
      margin-top: 15px;
    }
    
    .chip {
      background: #e0e0e0;
      padding: 5px 15px;
      border-radius: 20px;
      font-size: 0.9em;
      cursor: pointer;
      transition: background 0.3s;
    }
    
    .chip.active {
      background: #6f42c1;
      color: white;
    }
    
    .chip:hover {
      background: #d0d0d0;
    }
    
    .chip.active:hover {
      background: #5a32a3;
    }
    
    @media (max-width: 768px) {
      .search-box {
        flex-direction: column;
      }
      
      .search-box input, .search-box select {
        width: 100%;
      }
    }
    
    .footer {
      text-align: center;
      color: white;
      margin-top: 40px;
      padding: 20px;
    }
    
    .refresh-btn {
      position: fixed;
      bottom: 30px;
      right: 30px;
      background: #28a745;
      color: white;
      border: none;
      padding: 15px;
      border-radius: 50%;
      cursor: pointer;
      box-shadow: 0 5px 20px rgba(0,0,0,0.2);
      font-size: 1.5em;
      transition: transform 0.3s;
    }
    
    .refresh-btn:hover {
      transform: rotate(180deg);
    }
  </style>
</head>
<body>
  <div class="container">
    <!-- En-t√™te -->
    <div class="header">
      <h1>ü§ø JSA Subaquatique - Palanqu√©es</h1>
      <div class="mode-badge">üëÅÔ∏è Mode Consultation</div>
      <p style="margin-top: 10px; color: #666;">Consultez les palanqu√©es et trouvez vos sessions de plong√©e</p>
    </div>
    
    <!-- Statistiques -->
    <div class="stats-banner" id="stats">
      <div class="stat-item">
        <div class="stat-value" id="stat-total">0</div>
        <div class="stat-label">Palanqu√©es totales</div>
      </div>
      <div class="stat-item">
        <div class="stat-value" id="stat-today">0</div>
        <div class="stat-label">Aujourd'hui</div>
      </div>
      <div class="stat-item">
        <div class="stat-value" id="stat-week">0</div>
        <div class="stat-label">Cette semaine</div>
      </div>
      <div class="stat-item">
        <div class="stat-value" id="stat-plongeurs">0</div>
        <div class="stat-label">Plongeurs actifs</div>
      </div>
    </div>
    
    <!-- Section recherche -->
    <div class="search-section">
      <h2 style="margin-bottom: 15px; color: #333;">üîç Rechercher une palanqu√©e</h2>
      
      <div class="search-box">
        <input type="text" id="search-name" placeholder="Votre nom..." />
        <input type="date" id="search-date" />
        <select id="search-site">
          <option value="">Tous les sites</option>
          <option value="piscine">Piscine</option>
          <option value="fosse">Fosse</option>
          <option value="mer">Mer</option>
          <option value="lac">Lac</option>
          <option value="carriere">Carri√®re</option>
        </select>
        <button class="btn-search" onclick="searchPalanquees()">
          üîç Rechercher
        </button>
      </div>
      
      <!-- Filtres rapides -->
      <div class="filter-chips">
        <div class="chip" onclick="filterToday(this)">üìÖ Aujourd'hui</div>
        <div class="chip" onclick="filterWeek(this)">üìÜ Cette semaine</div>
        <div class="chip" onclick="filterMonth(this)">üìä Ce mois</div>
        <div class="chip" onclick="filterMyPalanquees(this)">üë§ Mes palanqu√©es</div>
      </div>
    </div>
    
    <!-- Liste des palanqu√©es -->
    <div class="palanquees-list" id="palanquees-container">
      <!-- Les palanqu√©es seront affich√©es ici -->
    </div>
    
    <!-- Message si pas de r√©sultats -->
    <div class="no-results" id="no-results" style="display: none;">
      <h3>üîç Aucune palanqu√©e trouv√©e</h3>
      <p>Modifiez vos crit√®res de recherche ou consultez toutes les palanqu√©es</p>
    </div>
  </div>
  
  <!-- Bouton rafra√Æchir -->
  <button class="refresh-btn" onclick="refreshData()" title="Rafra√Æchir les donn√©es">
    üîÑ
  </button>
  
  <!-- Footer -->
  <div class="footer">
    <p>Version consultation publique - Lecture seule</p>
    <p style="font-size: 0.9em; opacity: 0.8;">JSA Subaquatique ¬© 2025</p>
  </div>

  <script>
    // Donn√©es de d√©monstration - √Ä remplacer par vos vraies donn√©es
    let palanqueesData = [
      {
        id: 1,
        date: '2025-01-18',
        heure: '14:00',
        site: 'Piscine',
        directeur: 'Jean Martin',
        profondeur: '5m',
        plongeurs: [
          { nom: 'Alice Dubois', niveau: 'N2' },
          { nom: 'Bob Leroy', niveau: 'N1' },
          { nom: 'Charlie Durand', niveau: 'N2' }
        ]
      },
      {
        id: 2,
        date: '2025-01-19',
        heure: '09:00',
        site: 'Fosse',
        directeur: 'Marie Lambert',
        profondeur: '20m',
        plongeurs: [
          { nom: 'David Martin', niveau: 'N3' },
          { nom: 'Emma Wilson', niveau: 'N2' },
          { nom: 'Frank Bernard', niveau: 'N3' }
        ]
      }
    ];
    
    // Charger les donn√©es depuis localStorage si disponible
    function loadData() {
      const stored = localStorage.getItem('palanquees');
      if (stored) {
        try {
          palanqueesData = JSON.parse(stored);
        } catch (e) {
          console.error('Erreur chargement donn√©es:', e);
        }
      }
      displayPalanquees(palanqueesData);
      updateStats();
    }
    
    // Afficher les palanqu√©es
    function displayPalanquees(palanquees) {
      const container = document.getElementById('palanquees-container');
      const noResults = document.getElementById('no-results');
      
      if (palanquees.length === 0) {
        container.innerHTML = '';
        noResults.style.display = 'block';
        return;
      }
      
      noResults.style.display = 'none';
      container.innerHTML = palanquees.map(p => `
        <div class="palanquee-card">
          <div class="palanquee-header">
            <div class="palanquee-title">Palanqu√©e #${p.id}</div>
            <div class="palanquee-date">üìÖ ${formatDate(p.date)}</div>
          </div>
          
          <div class="palanquee-info">
            <div class="info-item">
              <span class="info-label">üïê Heure:</span>
              <span>${p.heure}</span>
            </div>
            <div class="info-item">
              <span class="info-label">üìç Site:</span>
              <span>${p.site}</span>
            </div>
            <div class="info-item">
              <span class="info-label">üë®‚Äç‚úàÔ∏è Directeur:</span>
              <span>${p.directeur}</span>
            </div>
            <div class="info-item">
              <span class="info-label">üåä Profondeur:</span>
              <span>${p.profondeur}</span>
            </div>
          </div>
          
          <div class="plongeurs-list">
            <h4 style="margin-bottom: 10px; color: #666;">üë• Plongeurs (${p.plongeurs.length})</h4>
            ${p.plongeurs.map(plongeur => `
              <div class="plongeur-item">
                <span class="plongeur-name">${plongeur.nom}</span>
                <span class="plongeur-niveau">${plongeur.niveau}</span>
              </div>
            `).join('')}
          </div>
        </div>
      `).join('');
    }
    
    // Formater la date
    function formatDate(dateStr) {
      const date = new Date(dateStr);
      const options = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' };
      return date.toLocaleDateString('fr-FR', options);
    }
    
    // Rechercher les palanqu√©es
    function searchPalanquees() {
      const name = document.getElementById('search-name').value.toLowerCase();
      const date = document.getElementById('search-date').value;
      const site = document.getElementById('search-site').value;
      
      let filtered = palanqueesData;
      
      if (name) {
        filtered = filtered.filter(p => 
          p.plongeurs.some(plongeur => 
            plongeur.nom.toLowerCase().includes(name)
          ) ||
          p.directeur.toLowerCase().includes(name)
        );
      }
      
      if (date) {
        filtered = filtered.filter(p => p.date === date);
      }
      
      if (site) {
        filtered = filtered.filter(p => p.site.toLowerCase() === site.toLowerCase());
      }
      
      displayPalanquees(filtered);
    }
    
    // Filtres rapides
    function filterToday(chip) {
      resetChips();
      chip.classList.add('active');
      const today = new Date().toISOString().split('T')[0];
      const filtered = palanqueesData.filter(p => p.date === today);
      displayPalanquees(filtered);
    }
    
    function filterWeek(chip) {
      resetChips();
      chip.classList.add('active');
      const today = new Date();
      const weekAgo = new Date(today.getTime() - 7 * 24 * 60 * 60 * 1000);
      const filtered = palanqueesData.filter(p => {
        const pDate = new Date(p.date);
        return pDate >= weekAgo && pDate <= today;
      });
      displayPalanquees(filtered);
    }
    
    function filterMonth(chip) {
      resetChips();
      chip.classList.add('active');
      const today = new Date();
      const monthAgo = new Date(today.getTime() - 30 * 24 * 60 * 60 * 1000);
      const filtered = palanqueesData.filter(p => {
        const pDate = new Date(p.date);
        return pDate >= monthAgo && pDate <= today;
      });
      displayPalanquees(filtered);
    }
    
    function filterMyPalanquees(chip) {
      const name = prompt('Entrez votre nom complet:');
      if (name) {
        resetChips();
        chip.classList.add('active');
        document.getElementById('search-name').value = name;
        searchPalanquees();
      }
    }
    
    function resetChips() {
      document.querySelectorAll('.chip').forEach(c => c.classList.remove('active'));
    }
    
    // Mettre √† jour les statistiques
    function updateStats() {
      const today = new Date().toISOString().split('T')[0];
      const weekAgo = new Date(new Date().getTime() - 7 * 24 * 60 * 60 * 1000);
      
      document.getElementById('stat-total').textContent = palanqueesData.length;
      
      document.getElementById('stat-today').textContent = 
        palanqueesData.filter(p => p.date === today).length;
      
      document.getElementById('stat-week').textContent = 
        palanqueesData.filter(p => {
          const pDate = new Date(p.date);
          return pDate >= weekAgo;
        }).length;
      
      const uniquePlongeurs = new Set();
      palanqueesData.forEach(p => {
        p.plongeurs.forEach(plongeur => uniquePlongeurs.add(plongeur.nom));
      });
      document.getElementById('stat-plongeurs').textContent = uniquePlongeurs.size;
    }
    
    // Rafra√Æchir les donn√©es
    function refreshData() {
      const btn = document.querySelector('.refresh-btn');
      btn.style.transform = 'rotate(360deg)';
      setTimeout(() => {
        loadData();
        btn.style.transform = 'rotate(0deg)';
        alert('‚úÖ Donn√©es actualis√©es !');
      }, 500);
    }
    
    // Charger au d√©marrage
    document.addEventListener('DOMContentLoaded', loadData);
    
    // Auto-refresh toutes les 5 minutes
    setInterval(loadData, 5 * 60 * 1000);
  </script>
</body>
</html>